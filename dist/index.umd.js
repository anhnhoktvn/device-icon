!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.deviceIcon=e()}(this,function(){function t(t){const e=new Image;return new Promise(n=>{e.onload=(()=>n(e)),e.src=t})}const e=document.createElement("canvas");e.width=60,e.height=20;const n=e.getContext("2d");n.imageSmoothingEnabled=!0;const r={};const i=document.createElement("canvas"),o=i.getContext("2d");function a(e,n,{IMAGES:r,ICON_SIZE:a,IMG_W:c,IMG_H:h}){return new Promise(function(u,d){let l,f,s;return function(e,n){const r=n[e];return r||console.error("no image status",e),t(r)}(e,r).then(function(e){try{return l=e,i.width=a,i.height=a,o.clearRect(0,0,i.width,i.height),o.save(),o.translate(i.width/2,i.height/2),o.rotate(n*Math.PI/180),o.drawImage(l,0,0,l.naturalWidth,l.naturalHeight,-c/2,-h/2,c,h),o.restore(),t(f=i.toDataURL()).then(function(t){try{return u(s=t)}catch(t){return d(t)}},d)}catch(t){return d(t)}},d)})}o.imageSmoothingEnabled=!0;const c=52,h=c,u=Math.round(.4*c),d=c+u,l=c/2,f=document.createElement("canvas");f.width=h,f.height=d;const s=f.getContext("2d");s.imageSmoothingEnabled=!0;const g={};return function(i,o,m,w){return new Promise(function(y,x){let I,E,S,p;return o=Math.round(o||0)%360,g[I=`${i}|${o}|${m}`]?y(g[I]):a(i,o,w).then(function(i){try{return E=i,s.clearRect(0,0,f.width,f.height),s.drawImage(E,0,0,E.naturalWidth,E.naturalHeight,0,0,c,c),function(i){return new Promise(function(o,a){let c,h;return r[i]?o(r[i]):(n.fillStyle="white",n.fillRect(0,0,e.width,e.height),n.textAlign="center",n.textBaseline="top",n.fillStyle="black",n.font="bold 18px Arial",n.fillText(i,e.width/2,0,e.width),t(c=e.toDataURL()).then(function(t){try{return r[i]=h=t,o(h)}catch(t){return a(t)}},a))})}(m).then(function(t){try{return s.drawImage(S=t,0,0,S.naturalWidth,S.naturalHeight,0,d-u,f.width,u),p={url:f.toDataURL(),origin:{x:0,y:0},anchor:{x:l,y:l},scaledSize:{width:h,height:d}},g[I]=p,y(p)}catch(t){return x(t)}},x)}catch(t){return x(t)}},x)})}});
//# sourceMappingURL=index.umd.js.map
