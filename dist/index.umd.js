!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.deviceIcon=e()}(this,function(){function t(t){const e=new Image;return new Promise(n=>{e.onload=(()=>n(e)),e.src=t})}const e=document.createElement("canvas");e.width=60,e.height=20;const n=e.getContext("2d");n.imageSmoothingEnabled=!0;const r={};const i=document.createElement("canvas"),o=i.getContext("2d");o.imageSmoothingEnabled=!0;const a={};function c(e,n,{IMAGES:r,ICON_SIZE:c,IMG_W:h,IMG_H:u}){return new Promise(function(d,l){let s,f,g;return n=Math.round(n),a[e+n]?d(a[e+n]):function(e,n){const r=n[e];return r||console.error("no image status",e),t(r)}(e,r).then(function(r){try{return s=r,i.width=c,i.height=c,o.clearRect(0,0,i.width,i.height),o.save(),o.translate(i.width/2,i.height/2),o.rotate(n*Math.PI/180),o.drawImage(s,0,0,s.naturalWidth,s.naturalHeight,-h/2,-u/2,h,u),o.restore(),t(f=i.toDataURL()).then(function(t){try{return a[e+n]=g=t,d(g)}catch(t){return l(t)}},l)}catch(t){return l(t)}},l)})}const h=52,u=h,d=Math.round(.4*h),l=h+d,s=h/2,f=document.createElement("canvas");f.width=u,f.height=l;const g=f.getContext("2d");g.imageSmoothingEnabled=!0;const m={};return function(i,o,a,w){return new Promise(function(y,x){let I,E,S;return m[i+(o%=360)+a]?y(m[i+o+a]):c(i,o,w).then(function(c){try{return I=c,g.clearRect(0,0,f.width,f.height),g.drawImage(I,0,0,I.naturalWidth,I.naturalHeight,0,0,h,h),function(i){return new Promise(function(o,a){let c,h;return r[i]?o(r[i]):(n.fillStyle="white",n.fillRect(0,0,e.width,e.height),n.textAlign="center",n.textBaseline="top",n.fillStyle="black",n.font="bold 18px Arial",n.fillText(i,e.width/2,0,e.width),t(c=e.toDataURL()).then(function(t){try{return r[i]=h=t,o(h)}catch(t){return a(t)}},a))})}(a).then(function(t){try{return g.drawImage(E=t,0,0,E.naturalWidth,E.naturalHeight,0,l-d,f.width,d),S={url:f.toDataURL(),origin:{x:0,y:0},anchor:{x:s,y:s},scaledSize:{width:u,height:l}},m[i+o+a]=S,y(S)}catch(t){return x(t)}},x)}catch(t){return x(t)}},x)})}});
//# sourceMappingURL=index.umd.js.map
